<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title>Short Papers</title>

    <!-- Bootstrap core CSS -->
<link href="https://getbootstrap.com/docs/5.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

 


    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      body{
        font-family: Arial, Sans;
        margin: 0;
        } 

        .wrapper{
        position: absolute;
        top: 50%;
        left: 50%;
        width: 300px;
        text-align:center;
        transform: translateX(-50%);
        }

        .spanner{
        position:fixed;
        top: 50%;
        left: 0;
        background: #2a2a2a55;
        width: 100%;
        display:block;
        text-align:center;
        color: #FFF;
        transform: translateY(-50%);
        z-index: 1000;
        visibility: hidden;
        height: 100vh;
        }

        .overlay{
        position: fixed;
            width: 100%;
            height: 100%;
        background: rgba(0,0,0,0.8);
        visibility: hidden;
        }

        .loader,
        .loader:before,
        .loader:after {
        border-radius: 50%;
        width: 2.5em;
        height: 2.5em;
        -webkit-animation-fill-mode: both;
        animation-fill-mode: both;
        -webkit-animation: load7 1.8s infinite ease-in-out;
        animation: load7 1.8s infinite ease-in-out;
        }
        .loader {
        color: #ffffff;
        font-size: 10px;
        margin: 80px auto;
        position: relative;
        text-indent: -9999em;
        -webkit-transform: translateZ(0);
        -ms-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-animation-delay: -0.16s;
        animation-delay: -0.16s;
        margin-top: 40vh;
        }
        .loader:before,
        .loader:after {
        content: '';
        position: absolute;
        top: 0;
        }
        .loader:before {
        left: -3.5em;
        -webkit-animation-delay: -0.32s;
        animation-delay: -0.32s;
        }
        .loader:after {
        left: 3.5em;
        }
        @-webkit-keyframes load7 {
        0%,
        80%,
        100% {
            box-shadow: 0 2.5em 0 -1.3em;
        }
        40% {
            box-shadow: 0 2.5em 0 0;
        }
        }
        @keyframes load7 {
        0%,
        80%,
        100% {
            box-shadow: 0 2.5em 0 -1.3em;
        }
        40% {
            box-shadow: 0 2.5em 0 0;
        }
        }

        .show{
        visibility: visible;
        }

        .spanner, .overlay{
            opacity: 0;
            -webkit-transition: all 0.3s;
            -moz-transition: all 0.3s;
            transition: all 0.3s;
        }

        .spanner.show, .overlay.show {
            opacity: 1
        }
    </style>

  </head>
  <body class="bg-light">
    
<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark" aria-label="Main navigation">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Short Papers</a>
    <button class="navbar-toggler p-0 border-0" type="button" id="navbarSideCollapse" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
        
        
      </ul>
      
    </div>
  </div>
</nav>



<main class="container">
  
  <div class="col-xs-12 mt-5 pt-3">

    <form class="col-xs-12 col-md-4 mx-auto">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="search">
      </form>
  </div>


  <div class="my-3 p-3 bg-body rounded shadow-sm" >
    <h6 class="border-bottom pb-2 mb-0">Papers</h6>
    <div class="col-xs-12" id="papers">

    </div>
    
    </div>

  </div>
  
  <div class="col-xs-12 mt-5 py-1"></div>

  <div class="overlay"></div>
    <div class="spanner">
    <div class="loader"></div>
    <p>Summarising Paper</p>
    </div>
</main>


    <script src="https://getbootstrap.com/docs/5.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"   integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="   crossorigin="anonymous"></script>

      <script>
          $ = jQuery;

        $(document).ready(function(){

          function createPaperItem(name,summary,pdfUrl, pageUrl, updated, published, index){

              return `<div class="d-flex text-muted pt-3">

                        <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
                            <div class="col-xs-12 justify-content-between">
                            <div class="row">

                                    <div class="col-12 my-1">
                                        <a class="text-gray-dark text-decoration-none" href="${pageUrl}"><h5>${name}</h5></a>
                                    </div>
                                    
                                    <div class="col-12 col-md-10 my-1 mb-2">
                                        <strong class="text-gray-dark">Updated: ${updated}</strong>
                                        <strong class="text-gray-dark ml-2">Published: ${published}</strong>
                                    </div>

                                    <div class="col-xs-12 col-md-2">
                                        <a href="#" class="btn-sm btn-primary text-decoration-none summarise" data-summarise="${pdfUrl}" data-summersie-target="${index}">Summerise</a>
                                        <a href="${pdfUrl}" class="btn-sm btn-primary text-decoration-none" target="_blank">Open Paper</a>
                                    </div>

                                </div>
                            </div>
                            <span class="d-block">${summary}</span>

                            <span class="d-block pt-3" id="summerise-item-${index}"></span>

                        </div>
                    </div>`;
                }

          $('form').on('submit', function(e){
            e.preventDefault();
          });

          $("#search").on("keyup", function(e){
              e.preventDefault();

              var search = $("#search").val();

              
              $.ajax({
                  url: 'https://export.arxiv.org/api/query?search_query='+search+'&start=0&max_results=30&sortOrder=descending&sortBy=relevance',
                  type: "GET",
                  success: function(doc){
                    
                    entries = doc.getElementsByTagName("entry")

                    $("#papers").html("");

                      var html = "";

                      for(var i = 0; i < entries.length; i++){
                        let pageUrl = entries[i].getElementsByTagName("id")[0].innerHTML


                        // get all the links and get the pdf url
                        let pdfUrl = entries[i].getElementsByTagName("link")
                        
                        pdfUrl = pdfUrl[pdfUrl.length - 1].getAttribute("href")+'.pdf';
                        

                        let name = entries[i].getElementsByTagName("title")[0].innerHTML;
                        let summary = entries[i].getElementsByTagName("summary")[0].innerHTML;
                        let published = entries[i].getElementsByTagName("published")[0].innerHTML;
                        let updated = entries[i].getElementsByTagName("updated")[0].innerHTML;

                          html += createPaperItem(name,summary,pdfUrl, pageUrl, updated, published, i);
                      }

                      $("#papers").html(html);

                          $('.summarise').on('click', function(e){
                            e.preventDefault();

                              var paperUrl = $(this).data('summarise');
                              var summeriseTarget = $(this).data('summersie-target');

                                $.ajax({
                                    url: 'http://localhost:3000/tika?url='+paperUrl,
                                    type: "GET",
                                    beforeSend: function(){
                                        $("div.spanner").addClass("show");
                                        $("div.overlay").addClass("show");
                                    },
                                    complete: function(){
                                        $("div.spanner").removeClass("show");
                                        $("div.overlay").removeClass("show");
                                    },
                                    success: function(doc){
                                        
                                        let summarised = `<h6>AI Summary:</h6><p>${doc}</p>`;

                                        $("#summerise-item-"+summeriseTarget).html(summarised);
                                    }
                                });

                          })
                      

                  }
              });

          });

        });



      </script>
  </body>
</html>



